<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 650">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
      <polygon points="0 0, 10 4, 0 8" fill="#475569"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1000" height="650" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="500" y="42" text-anchor="middle" font-family="system-ui, sans-serif" font-size="28" font-weight="700" fill="#1e293b">Nettoyage des donnÃ©es de sondage</text>
  
  
  <!-- ==================== STEP 1: df_raw ==================== -->
  
  <!-- Step number -->
  <circle cx="55" cy="90" r="22" fill="#f59e0b" stroke="#b45309" stroke-width="2"/>
  <text x="55" y="97" text-anchor="middle" font-family="system-ui, sans-serif" font-size="20" font-weight="700" fill="white">1</text>
  
  <text x="85" y="97" font-family="system-ui, sans-serif" font-size="16" font-weight="600" fill="#92400e">DonnÃ©es brutes</text>
  
  <!-- df_raw label -->
  <text x="195" y="135" text-anchor="middle" font-family="monospace" font-size="22" font-weight="700" fill="#b45309">df_raw</text>
  <text x="195" y="158" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" fill="#78716c">2000 lignes Ã— 80 colonnes</text>
  
  <!-- Raw data table -->
  <rect x="40" y="170" width="310" height="230" rx="8" fill="#fffbeb" stroke="#f59e0b" stroke-width="3"/>
  
  <!-- Column headers row -->
  <rect x="40" y="170" width="310" height="36" rx="8" fill="#fef3c7"/>
  <rect x="40" y="190" width="310" height="16" fill="#fef3c7"/>
  
  <!-- Column dividers -->
  <line x1="110" y1="170" x2="110" y2="400" stroke="#fcd34d" stroke-width="1"/>
  <line x1="255" y1="170" x2="255" y2="400" stroke="#fcd34d" stroke-width="1"/>
  
  <!-- Headers - incomprehensible names -->
  <text x="75" y="195" text-anchor="middle" font-family="monospace" font-size="13" fill="#92400e" font-weight="600">q1_a</text>
  <text x="182" y="195" text-anchor="middle" font-family="monospace" font-size="13" fill="#b45309" font-weight="700">v12_ses_3</text>
  <text x="300" y="195" text-anchor="middle" font-family="monospace" font-size="13" fill="#92400e">...</text>
  
  <line x1="40" y1="206" x2="350" y2="206" stroke="#f59e0b" stroke-width="2"/>
  
  <!-- Data rows - incomprehensible numeric codes -->
  <text x="75" y="235" text-anchor="middle" font-family="monospace" font-size="14" fill="#525252">3</text>
  <text x="182" y="235" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151">5</text>
  <text x="300" y="235" text-anchor="middle" font-family="monospace" font-size="14" fill="#a3a3a3">...</text>
  
  <text x="75" y="265" text-anchor="middle" font-family="monospace" font-size="14" fill="#525252">1</text>
  <text x="182" y="265" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151">3</text>
  <text x="300" y="265" text-anchor="middle" font-family="monospace" font-size="14" fill="#a3a3a3">...</text>
  
  <text x="75" y="295" text-anchor="middle" font-family="monospace" font-size="14" fill="#525252">2</text>
  <text x="182" y="295" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151">7</text>
  <text x="300" y="295" text-anchor="middle" font-family="monospace" font-size="14" fill="#a3a3a3">...</text>
  
  <text x="75" y="325" text-anchor="middle" font-family="monospace" font-size="14" fill="#525252">5</text>
  <text x="182" y="325" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151">1</text>
  <text x="300" y="325" text-anchor="middle" font-family="monospace" font-size="14" fill="#a3a3a3">...</text>
  
  <text x="195" y="365" text-anchor="middle" font-family="system-ui, sans-serif" font-size="18" fill="#a3a3a3">â‹®</text>
  <text x="195" y="392" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#78716c" font-style="italic">noms et valeurs incomprÃ©hensibles</text>
  
  <!-- Highlight the v12_ses_3 column -->
  <rect x="111" y="207" width="143" height="150" fill="none" stroke="#b45309" stroke-width="3" stroke-dasharray="6,3" rx="4"/>
  
  
  <!-- ==================== STEP 2: Transformation with Codebook ==================== -->
  
  <!-- Arrow from raw to transform -->
  <path d="M 355 290 L 405 290" stroke="#475569" stroke-width="3" marker-end="url(#arrow)" fill="none"/>
  
  <!-- Step number -->
  <circle cx="425" cy="115" r="22" fill="#64748b" stroke="#475569" stroke-width="2"/>
  <text x="425" y="122" text-anchor="middle" font-family="system-ui, sans-serif" font-size="20" font-weight="700" fill="white">2</text>
  
  <text x="455" y="122" font-family="system-ui, sans-serif" font-size="16" font-weight="600" fill="#475569">Recodage</text>
  
  <!-- Codebook reference box -->
  <rect x="415" y="140" width="170" height="45" rx="6" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
  <text x="500" y="160" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#b91c1c">ðŸ“– Codebook</text>
  <text x="500" y="177" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#dc2626">v12_ses_3 = Ã©ducation</text>
  
  <!-- Transform box - made taller to accommodate code example -->
  <rect x="415" y="195" width="170" height="245" rx="8" fill="#f1f5f9" stroke="#64748b" stroke-width="3"/>
  
  <text x="500" y="220" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#334155">Logique de</text>
  <text x="500" y="238" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#334155">transformation</text>
  
  <line x1="430" y1="250" x2="570" y2="250" stroke="#cbd5e1" stroke-width="2"/>
  
  <!-- Recode mappings - showing code to meaning -->
  <text x="500" y="272" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#dc2626">Sans universitÃ© = 0</text>
  <text x="500" y="289" text-anchor="middle" font-family="monospace" font-size="10" fill="#71717a">1 â†’ Elementary</text>
  <text x="500" y="304" text-anchor="middle" font-family="monospace" font-size="10" fill="#71717a">3 â†’ High school</text>
  <text x="500" y="319" text-anchor="middle" font-family="monospace" font-size="10" fill="#71717a">4 â†’ Associate</text>
  
  <line x1="440" y1="330" x2="560" y2="330" stroke="#e2e8f0" stroke-width="1"/>
  
  <text x="500" y="350" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#16a34a">UniversitÃ© = 1</text>
  <text x="500" y="367" text-anchor="middle" font-family="monospace" font-size="10" fill="#71717a">5 â†’ Some college</text>
  <text x="500" y="382" text-anchor="middle" font-family="monospace" font-size="10" fill="#71717a">7 â†’ College grad</text>
  
  <!-- Code example section -->
  <line x1="425" y1="398" x2="575" y2="398" stroke="#94a3b8" stroke-width="1"/>
  <text x="500" y="415" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b" font-style="italic">Exemple de code :</text>
  <rect x="422" y="422" width="156" height="14" rx="2" fill="#1e293b"/>
  <text x="500" y="432" text-anchor="middle" font-family="monospace" font-size="7" fill="#e2e8f0">df_clean$university[</text>
  <rect x="422" y="436" width="156" height="14" rx="2" fill="#1e293b"/>
  <text x="500" y="446" text-anchor="middle" font-family="monospace" font-size="7" fill="#e2e8f0">df_raw$v12_ses_3==7] &lt;- 1</text>
  
  
  <!-- Arrow from transform to clean -->
  <path d="M 590 290 L 640 290" stroke="#475569" stroke-width="3" marker-end="url(#arrow)" fill="none"/>
  
  
  <!-- ==================== STEP 3: df_clean ==================== -->
  
  <!-- Step number -->
  <circle cx="665" cy="90" r="22" fill="#3b82f6" stroke="#1d4ed8" stroke-width="2"/>
  <text x="665" y="97" text-anchor="middle" font-family="system-ui, sans-serif" font-size="20" font-weight="700" fill="white">3</text>
  
  <text x="695" y="97" font-family="system-ui, sans-serif" font-size="16" font-weight="600" fill="#1d4ed8">DonnÃ©es nettoyÃ©es</text>
  
  <!-- df_clean label -->
  <text x="805" y="135" text-anchor="middle" font-family="monospace" font-size="22" font-weight="700" fill="#1d4ed8">df_clean</text>
  <text x="805" y="158" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" fill="#64748b">2000 lignes Ã— variables choisies</text>
  
  <!-- Clean data table -->
  <rect x="655" y="170" width="300" height="230" rx="8" fill="#eff6ff" stroke="#3b82f6" stroke-width="3"/>
  
  <!-- Column headers row -->
  <rect x="655" y="170" width="300" height="36" rx="8" fill="#dbeafe"/>
  <rect x="655" y="190" width="300" height="16" fill="#dbeafe"/>
  
  <!-- Column dividers -->
  <line x1="715" y1="170" x2="715" y2="400" stroke="#93c5fd" stroke-width="1"/>
  <line x1="815" y1="170" x2="815" y2="400" stroke="#93c5fd" stroke-width="1"/>
  
  <!-- Headers - clear meaningful names -->
  <text x="685" y="195" text-anchor="middle" font-family="monospace" font-size="14" fill="#1e40af" font-weight="700">id</text>
  <text x="765" y="195" text-anchor="middle" font-family="monospace" font-size="14" fill="#1e40af" font-weight="700">university</text>
  <text x="880" y="195" text-anchor="middle" font-family="monospace" font-size="14" fill="#60a5fa">...</text>
  
  <line x1="655" y1="206" x2="955" y2="206" stroke="#3b82f6" stroke-width="2"/>
  
  <!-- Data rows - clean values -->
  <text x="685" y="235" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151">1</text>
  <text x="765" y="235" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151" font-weight="600">1</text>
  <text x="880" y="235" text-anchor="middle" font-family="monospace" font-size="14" fill="#94a3b8">...</text>
  
  <text x="685" y="265" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151">2</text>
  <text x="765" y="265" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151" font-weight="600">0</text>
  <text x="880" y="265" text-anchor="middle" font-family="monospace" font-size="14" fill="#94a3b8">...</text>
  
  <text x="685" y="295" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151">3</text>
  <text x="765" y="295" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151" font-weight="600">1</text>
  <text x="880" y="295" text-anchor="middle" font-family="monospace" font-size="14" fill="#94a3b8">...</text>
  
  <text x="685" y="325" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151">4</text>
  <text x="765" y="325" text-anchor="middle" font-family="monospace" font-size="14" fill="#374151" font-weight="600">0</text>
  <text x="880" y="325" text-anchor="middle" font-family="monospace" font-size="14" fill="#94a3b8">...</text>
  
  <text x="805" y="365" text-anchor="middle" font-family="system-ui, sans-serif" font-size="18" fill="#a3a3a3">â‹®</text>
  <text x="805" y="392" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#64748b" font-style="italic">noms clairs, en construction</text>
  
  <!-- "..." columns indicate more to come -->
  <text x="880" y="315" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8" transform="rotate(-90, 880, 315)">Ã  ajouter</text>
  
  
  <!-- ==================== STEP 4: Save ==================== -->
  
  <!-- Arrow down to save -->
  <path d="M 805 405 L 805 470" stroke="#475569" stroke-width="3" marker-end="url(#arrow)" fill="none"/>
  
  <!-- Save box -->
  <rect x="700" y="485" width="210" height="55" rx="8" fill="#f5f3ff" stroke="#8b5cf6" stroke-width="3"/>
  <text x="805" y="512" text-anchor="middle" font-family="monospace" font-size="15" fill="#5b21b6" font-weight="600">saveRDS(df_clean)</text>
  <text x="805" y="532" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#7c3aed">â†’ fichier .rds</text>
  
  <!-- Step number - repositioned to avoid overlap -->
  <circle cx="665" cy="512" r="22" fill="#8b5cf6" stroke="#6d28d9" stroke-width="2"/>
  <text x="665" y="519" text-anchor="middle" font-family="system-ui, sans-serif" font-size="20" font-weight="700" fill="white">4</text>
  
  <text x="665" y="555" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#6d28d9">Sauvegarde</text>
  
  
  <!-- ==================== Curved arrow showing the flow from raw to clean ==================== -->
  <path d="M 195 405 Q 195 480, 350 480 Q 500 480, 500 465 Q 500 450, 650 450 Q 750 450, 765 400" 
        stroke="#94a3b8" stroke-width="2" stroke-dasharray="8,4" fill="none" marker-end="url(#arrow)" opacity="0.6"/>
  <text x="350" y="505" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#64748b" font-style="italic">rÃ©pÃ©ter pour chaque variable</text>

</svg>